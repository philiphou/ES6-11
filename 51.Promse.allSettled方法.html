<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise.allSettled()</title>
</head>

<body>
    <script>
        // 声明两个promise 组成一个数组
        const p1 = new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve('这是商品数据-1')
            }, 2000)
        })
        const p2 = new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve('产品2')
            }, 1000)
        })

        // 调用 allSettled()方法：参数是一个数组，数组里的元素是各个 promise 对象
        // const result = Promise.allSettled([p1, p2]) //
        // console.log(result) // 输出：一个promise 对象，状态是fullfiled， promise 的result是一个数组，第一个元素是： {status: 'fulfilled', value: '这是商品数据-1'}
        // result.then(value => {
        //     console.log(value[0]) // 输出：{status: 'fulfilled', value: '这是商品数据-1'}
        //     console.log(value[1]) // 输出：{status: 'rejected', value: '出错了'}
        // })

        //  还有一个类似的方法： promise.all() 只有全部成功，才会返回成功的promise,结果也是P1,p2成功的结果
        const result2 = Promise.all([p1, p2])
        console.log(result2) // 这个返回的result 整体是个promise 对象，状态是 rejected,只要[p1,p2,..]里有一个是rejected,那么promise.all() 返回的promise 就是rejected 转态；
    </script>
</body>

</html>