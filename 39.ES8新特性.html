<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ES8 新特性</title>
</head>

<body>
    <script>
        //  1. async 函数: 在函数前面加 async 关键字，就变成了 async 函数
        async function fn() {
            //  如果返回值不是一个promise类型的对象，则这个 async 函数就返回一个成功的promise，这个romise的值就是此处的返回结果，promise 的状态就是 fulfilled(resolved)
            // return "liyitian"
            //  此处如果抛出错误： 这个 async 函数就返回一个失败的promise;
            // throw new Error()
            //  返回的结果如果是一个新的promise 对象，这种情况居多， 
            return new Promise((resolve, reject) => {
                resolve('成功666') // 如果此处成功，那么 外层的async 函数就会返回一个成功的promise, promise 的结果、值就是此处 resolve () 里的信息
            })
        }
        const result = fn()
        console.log(result) // 输出： promise; promise状态是 fulfilled, promise 结果是： '成功666'

        //  调用 。then()方法
        result.then(value => {
            console.log(value) // 输出： 成功666
        }, reason => {
            console.warn('reason')
        })
    </script>
</body>

</html>